#!/usr/bin/env bash
# of-shell-root: Open an interactive OpenFOAM-enabled shell as root inside a container.
#
# Key points:
# - Same as of-shell, but runs as root (UID=0, GID=0).
# - Useful for debugging container environment or fixing permissions inside container.
#
# Usage:
#   of-shell-root
#   of-shell-root <command> [args...]

set -euo pipefail

ENGINE="${OPENFOAM_ENGINE:-docker}"
IMAGE="${OPENFOAM_IMAGE:-docker.io/opencfd/openfoam-default}"
TAG="${OPENFOAM_TAG:-2406}"

exec "${ENGINE}" run --rm -it \
  --user 0:0 \
  -v "$PWD:$PWD" -w "$PWD" \
  "${IMAGE}:${TAG}" \
  -- bash -i "$@"

